(()=>{const e=document.querySelector("#file"),n=document.querySelector("#display"),t=document.querySelector("#downld"),o=document.querySelector("#fileType"),l=document.querySelector("#origSize"),i=document.querySelector("#newSize"),r=(document.querySelector("#savedSize"),document.querySelector("#dWidth")),c=document.querySelector("#dHeight"),d=document.querySelector("#compress");document.querySelector("#downloadButton")&&document.querySelector("#downloadButton"),e.addEventListener("click",(function(e){t.innerHTML="",l.innerHTML="",i.innerHTML=""})),async function(e){var a=new FileReader;let u=document.createElement("img");a.onload=function(e){u.src=this.result,n.appendChild(u)},e.addEventListener("change",(function(){a.readAsDataURL(e.files[0]),async function(e,n){var o=e.files[0],a=o.name.split(".")[0];l.innerHTML=`Original Size: ${o.size/1e6}MB`,console.info(o.size);var u=new Image;u.src=URL.createObjectURL(o),u.onload=function(){r.placeholder="Original width: "+u.width,c.placeholder="Original height: "+u.height,d.addEventListener("click",(function(e){e.preventDefault();var o=document.createElement("canvas");o.width=r.value?r.value:u.width,o.height=c.value?c.value:u.height,o.getContext("2d").drawImage(u,0,0),o.toBlob((function(e){console.info(e.size),i.innerHTML=`New Size: ${e.size/1e6}MB`,t.innerHTML="";var o=new File([e],a+"."+n.value);console.log(o),console.log(o.name),url=window.URL.createObjectURL(e),console.log(url);let l=document.createElement("a");l.id="downloadButton",t.appendChild(l),l.innerText="Download",l.href=url,l.download=o.name,l.className="btn btn-info mb-1 form-control",l.style.width="350px auto"}),"image/jpeg",.4)}))}}(e,o)}))}(e)})();